webpackJsonp([4],{CqCd:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("vLgD"),s={getList:function(){return Object(a.a)({url:"/user/user",method:"get"})},search:function(n,e,t){return Object(a.a)({url:"/user/user/search/"+n+"/"+e,method:"post",data:t})},save:function(n){return Object(a.a)({url:"/user/user",method:"post",data:n})},findById:function(n){return Object(a.a)({url:"/user/user/"+n,method:"get"})},update:function(n,e){return null==n||""==n?this.save(e):Object(a.a)({url:"/user/user/"+n,method:"put",data:e})},deleteById:function(n){return Object(a.a)({url:"/user/user/"+n,method:"delete"})},changeState:function(n,e){return Object(a.a)({url:"/user/user/"+n+"/"+e,method:"get"})}},r={name:"user",data:function(){return{list:[],total:0,currentPage:1,pageSize:10,searchMap:{},dialogFormVisible:!1,pojo:{}}},created:function(){this.fetchData()},methods:{changeState:function(n){var e=this;s.changeState(n.id,n.state).then(function(t){1==t.flag?"0"==n.state?e.$message({showClose:!0,message:"成功解封用户:"+n.nickname,type:"success"}):e.$message({showClose:!0,message:"成功封禁用户:"+n.nickname,type:"success"}):e.$message({showClose:!0,message:"网络错误！",type:"error"})})},url2List:function(n){var e=[];return e.push(n),e},fetchData:function(){var n=this;s.search(this.currentPage,this.pageSize,this.searchMap).then(function(e){n.list=e.data.rows,n.total=e.data.total})},handleSizeChange:function(n){var e=this;this.pageSize=n,s.search(this.currentPage,this.pageSize,this.searchMap).then(function(n){e.list=n.data.rows,e.total=n.data.total})},handleCurrentChange:function(n){var e=this;this.currentPage=n,s.search(this.currentPage,this.pageSize,this.searchMap).then(function(n){e.list=n.data.rows,e.total=n.data.total})},handleSave:function(){var n=this;s.update(this.id,this.pojo).then(function(e){n.$message({message:e.message,type:e.flag?"success":"error"}),e.flag&&n.fetchData()}),this.dialogFormVisible=!1},handleEdit:function(n){var e=this;this.id=n,this.dialogFormVisible=!0,""!=n?s.findById(n).then(function(n){n.flag&&(e.pojo=n.data)}):this.pojo={}},handleDelete:function(n){var e=this;this.$confirm("确定要删除此纪录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.deleteById(n).then(function(n){e.$message({message:n.message,type:n.flag?"success":"error"}),n.flag&&e.fetchData()})}).catch(function(){})}}},l={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("br"),n._v(" "),t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{attrs:{placeholder:"昵称"},model:{value:n.searchMap.nickname,callback:function(e){n.$set(n.searchMap,"nickname",e)},expression:"searchMap.nickname"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"是否被封禁"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:n.searchMap.state,callback:function(e){n.$set(n.searchMap,"state",e)},expression:"searchMap.state"}},[t("el-option",{attrs:{label:"封禁",value:"1"}}),n._v(" "),t("el-option",{attrs:{label:"未封禁",value:"0"}})],1)],1),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.fetchData()}}},[n._v("查询")])],1),n._v(" "),t("el-table",{attrs:{data:n.list}},[t("el-table-column",{attrs:{prop:"loginname",label:"用户名"}}),n._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),n._v(" "),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),n._v(" "),t("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),n._v(" "),t("el-table-column",{attrs:{label:"性别"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n        "+n._s("0"==e.row.sex?"男":"女")+"\n      ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"头像"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.avatar,"preview-src-list":n.url2List(e.row.avatar)}})],1)]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"fanscount",label:"粉丝"}}),n._v(" "),t("el-table-column",{attrs:{prop:"followcount",label:"关注"}}),n._v(" "),t("el-table-column",{attrs:{label:"封禁"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){n.changeState(e.row)}},model:{value:e.row.state,callback:function(t){n.$set(e.row,"state",t)},expression:"scope.row.state"}})]}}])})],1),n._v(" "),t("el-pagination",{attrs:{"current-page":n.currentPage,"page-sizes":[5,10,20],"page-size":n.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:n.total},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange,"update:total":function(e){n.total=e}}})],1)},staticRenderFns:[]};var o=t("VU/8")(r,l,!1,function(n){t("s6jT")},"data-v-c97c2376",null);e.default=o.exports},FKoQ:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},s6jT:function(n,e,t){var a=t("FKoQ");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("9abba55e",a,!0)}});