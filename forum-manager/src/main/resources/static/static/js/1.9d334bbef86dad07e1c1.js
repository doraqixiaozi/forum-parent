webpackJsonp([1],{"+til":function(e,t,a){var n=a("mUBw");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("399d2be0",n,!0)},"5sxp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("vLgD"),l={getList:function(){return Object(n.a)({url:"/gathering/gathering",method:"get"})},search:function(e,t,a){return Object(n.a)({url:"/gathering/gathering/search/"+e+"/"+t,method:"post",data:a})},save:function(e){return Object(n.a)({url:"/gathering/gathering",method:"post",data:e})},findById:function(e){return Object(n.a)({url:"/gathering/gathering/"+e,method:"get"})},update:function(e,t){return null==e||""==e?this.save(t):Object(n.a)({url:"/gathering/gathering/"+e,method:"put",data:t})},deleteById:function(e){return Object(n.a)({url:"/gathering/gathering/"+e,method:"delete"})}},i=a("Xv2c"),s={data:function(){return{list:[],total:0,currentPage:1,pageSize:10,searchMap:{},dialogFormVisible:!1,pojo:{image:""},cityList:[],id:""}},components:{myImage:a("6Cbj").a},created:function(){var e=this;this.fetchData(),i.a.getList().then(function(t){e.cityList=t.data})},methods:{changeMine:function(e){this.pojo.image=e},url2List:function(e){var t=[];return t.push(e),t},handleRemoveImage:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.pojo.image=e.url,this.dialogVisible=!0},fetchData:function(){var e=this;l.search(this.currentPage,this.pageSize,this.searchMap).then(function(t){e.list=t.data.rows,e.total=t.data.total,console.log(e.currentPage,e.pageSize)})},handleSizeChange:function(e){var t=this;this.pageSize=e,l.search(this.currentPage,this.pageSize,this.searchMap).then(function(e){t.list=e.data.rows,t.total=e.data.total})},handleCurrentChange:function(e){var t=this;this.currentPage=e,l.search(this.currentPage,this.pageSize,this.searchMap).then(function(e){t.list=e.data.rows,t.total=e.data.total})},handleSave:function(){var e=this;l.update(this.id,this.pojo).then(function(t){e.$message({message:t.message,type:t.flag?"success":"error"}),t.flag&&e.fetchData()}),this.dialogFormVisible=!1},handleEdit:function(e){var t=this;this.id=e,this.dialogFormVisible=!0,""!=e?l.findById(e).then(function(e){e.flag&&(t.pojo=e.data)}):this.pojo={}},handleDelete:function(e){var t=this;this.$confirm("确定要删除此纪录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.deleteById(e).then(function(e){t.$message({message:e.message,type:e.flag?"success":"error"}),e.flag&&t.fetchData()})}).catch(function(){})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.searchMap.name,callback:function(t){e.$set(e.searchMap,"name",t)},expression:"searchMap.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"主办方"},model:{value:e.searchMap.sponsor,callback:function(t){e.$set(e.searchMap,"sponsor",t)},expression:"searchMap.sponsor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可见"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMap.state,callback:function(t){e.$set(e.searchMap,"state",t)},expression:"searchMap.state"}},[a("el-option",{attrs:{label:"可见",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"不可见",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间:"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择开始时间"},model:{value:e.searchMap.startTime,callback:function(t){e.$set(e.searchMap,"startTime",t)},expression:"searchMap.startTime"}}),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择结束时间"},model:{value:e.searchMap.endTime,callback:function(t){e.$set(e.searchMap,"endTime",t)},expression:"searchMap.endTime"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.fetchData()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEdit("")}}},[e._v("新增")])],1),e._v(" "),a("el-table",{attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sponsor",label:"主办方",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"活动地址",width:"200px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"活动图"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,"preview-src-list":e.url2List(t.row.image)}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否可见",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.state?a("i",{staticClass:"el-icon-check"}):e._e(),e._v(" "),"0"==t.row.state?a("i",{staticClass:"el-icon-close"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleEdit(t.row.id)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:total":function(t){e.total=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.pojo.name,callback:function(t){e.$set(e.pojo,"name",t)},expression:"pojo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主办方"}},[a("el-input",{attrs:{placeholder:"主办方"},model:{value:e.pojo.sponsor,callback:function(t){e.$set(e.pojo,"sponsor",t)},expression:"pojo.sponsor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"基本地址"}},[a("el-input",{attrs:{placeholder:"基本地址"},model:{value:e.pojo.address,callback:function(t){e.$set(e.pojo,"address",t)},expression:"pojo.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"开始时间"},model:{value:e.pojo.starttime,callback:function(t){e.$set(e.pojo,"starttime",t)},expression:"pojo.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截至时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"开始时间"},model:{value:e.pojo.endtime,callback:function(t){e.$set(e.pojo,"endtime",t)},expression:"pojo.endtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"报名截止"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"报名截止"},model:{value:e.pojo.enrolltime,callback:function(t){e.$set(e.pojo,"enrolltime",t)},expression:"pojo.enrolltime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动详情"}},[a("el-input",{attrs:{placeholder:"活动详情",type:"textarea",rows:2},model:{value:e.pojo.detail,callback:function(t){e.$set(e.pojo,"detail",t)},expression:"pojo.detail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择城市"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.pojo.city,callback:function(t){e.$set(e.pojo,"city",t)},expression:"pojo.city"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可见"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.pojo.state,callback:function(t){e.$set(e.pojo,"state",t)},expression:"pojo.state"}})],1),e._v(" "),a("my-image",{attrs:{image:e.pojo.image,"label-name":"活动图","model-name":"gathering"},on:{changeMine:e.changeMine}}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave()}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("+til")},null,null);t.default=r.exports},"6Cbj":function(e,t,a){"use strict";var n=a("vLgD"),l="http://127.0.0.1:9014/image",i=function(e,t){return Object(n.a)({method:"post",url:l+"/"+t,data:e,headers:{"Content-Type":"multipart/form-data"}})},s={name:"myImage",data:function(){return{dialogVisible:!1}},props:["labelName","image","modelName"],methods:{uploadImg:function(e){var t=this,a=new FormData;a.append("image",e.file),i(a,this.modelName).then(function(e){t.image=e.data,t.$emit("changeMine",t.image)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:e.labelName}},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:""==e.image,expression:"image==''"}],staticClass:"avatar-uploader",attrs:{action:"none","http-request":e.uploadImg,"list-type":"picture-card","show-file-list":!1}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.image,expression:"image!=''"}],staticClass:"el-upload-list el-upload-list--picture-card"},[a("div",{staticClass:"el-upload-list__item is-success"},[a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.image,expression:"image!=''"}],staticClass:"el-image__inner el-image__preview",attrs:{src:e.image}}),e._v(" "),a("label",{staticClass:"el-upload-list__item-status-label"},[a("i",{staticClass:"el-icon-upload-success el-icon-check"})]),e._v(" "),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-delete"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){e.image=""}}})]),e._v(" "),a("span",{staticClass:"el-upload-list__item-delete"},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.dialogVisible=!0}}})])])])]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"modal-append-to-body":e.dialogVisible,"append-to-body":e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.image,alt:""}})])],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("rh0k")},"data-v-07b351f8",null);t.a=r.exports},LkAV:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Xv2c:function(e,t,a){"use strict";var n=a("vLgD");t.a={getList:function(){return Object(n.a)({url:"/base/city",method:"get"})},search:function(e,t,a){return Object(n.a)({url:"/base/city/search/"+e+"/"+t,method:"post",data:a})},save:function(e){return Object(n.a)({url:"/base/city",method:"post",data:e})},findById:function(e){return Object(n.a)({url:"/base/city/"+e,method:"get"})},update:function(e,t){return null===e||""===e?this.save(t):Object(n.a)({url:"/base/city/"+e,method:"put",data:t})},deleteById:function(e){return Object(n.a)({url:"/base/city/"+e,method:"delete"})}}},mUBw:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-table {\n  width: 99.9% !important;\n}\n.configurationTable .el-table__body-wrapper {\n  overflow: hidden;\n}\n.afterRenderClass .el-table__body-wrapper {\n\n  overflow: auto;\n}\n",""])},rh0k:function(e,t,a){var n=a("LkAV");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("276d0185",n,!0)}});